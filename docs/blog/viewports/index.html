<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">

		
		<title>grid 2：视图 viewports &middot; ShixiangWang
王诗翔</title>
		
		<meta property="og:title" content="grid 2：视图 viewports - ShixiangWang
王诗翔">
		
		<meta property="og:type" content="article">
		

		
			
			 
			<meta property="description" content="Post by 王诗翔 on Monday, August 9, 2021">
			<meta property="og:description" content="Post by 王诗翔 on Monday, August 9, 2021">
			
			
    	<meta property="twitter:card" content="summary">
  		<meta property="twitter:image" content="/apple-touch-icon-152x152.png">
			
		

		
		<meta property="keywords" content ="rstats">
		
		
		<meta name="twitter:creator" content="@WangShxiang">
		<meta name="twitter:site" content="https://shixiangwang.github.io">
		
		

		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
		<link rel="stylesheet" href="../../css/poole.css">
		<link rel="stylesheet" href="../../css/syntax.css">
		<link rel="stylesheet" href="../../css/hyde.css">
		
		
		<link rel="stylesheet" href="../../css/hamburgers.css">
		
		<link rel="stylesheet" href="../../css/custom.css">
		
		

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16" />
<meta name="application-name" content="Garrick Aden-Buie"/>
<meta name="msapplication-TileColor" content="#002B36" />
<meta name="msapplication-TileImage" content="/mstile-144x144.png" />
<meta name="theme-color" content="#ffffff">

<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Garrick Aden-Buie">

<link href="../../css/featherlight.min.css" type="text/css" rel="stylesheet" />

<script async defer src="https://buttons.github.io/buttons.js"></script>

<script defer src="../../js/van11y-accessible-hide-show-aria.min.js"></script>

<script defer src="../../js/toc.js"></script>



		<link href="../../blog/viewports" rel="canonical">
	</head>

	<body class="restyled-garrick  h-entry">
		<main class="content container" role="main">
			<article class="post">
				<header>
					<a class="u-url" href="../../blog/viewports">
						<h1 class="post-title p-name">grid 2：视图 viewports</h1>
					</a>
					<h3 class="post-author">王诗翔</h3>
					<time class="post-date dt-published" datetime="2021-08-09T00:00:00Z">Monday, 9 August 2021</time>
					
				</header>
				<div class="post-content e-content">
					<blockquote>
<p>原文：<a href="https://bookdown.org/rdpeng/RProgDA/the-grid-package.html#viewports">https://bookdown.org/rdpeng/RProgDA/the-grid-package.html#viewports</a></p>
</blockquote>
<h2 id="视图是什么">视图是什么</h2>
<p>视图是绘图窗口，我们可以将其移进或移出，以方便使用grid包定制绘图。我们可以导航到其中一个视图，进行一些更改，然后弹出并导航到另一个视图。简而言之，视图提供了一种在绘图（可以想象为一个画板）的不同子空间（不同的层，如果了解ggplot2，采用图层概念理解它）中导航和工作的方法。</p>
<p>下面是一个例子，我们在整个图形的右上角绘制一个棒棒图：</p>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#408080;font-style:italic"># 默认，grid会初始化第一个视图</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">rectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#408080;font-style:italic"># 创建一个小的视图</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#408080;font-style:italic"># 指定新视图的位置，X为0.5，Y为0.5，视图高宽都为0.5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>sample_vp <span style="color:#666">&lt;-</span> <span style="color:#00f">viewport</span>(x <span style="color:#666">=</span> <span style="color:#666">0.5</span>, y <span style="color:#666">=</span> <span style="color:#666">0.5</span>, 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>                      width <span style="color:#666">=</span> <span style="color:#666">0.5</span>, height <span style="color:#666">=</span> <span style="color:#666">0.5</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>                      just <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;left&#34;</span>, <span style="color:#ba2121">&#34;bottom&#34;</span>)) <span style="color:#408080;font-style:italic"># 位置校正参数</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#408080;font-style:italic"># 导航视图：上面只是定义了一个视图对象</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#408080;font-style:italic"># 我们可以想象为一个大画板是一张白纸</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#408080;font-style:italic"># 我们上面准备了一张小的白纸</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#408080;font-style:italic"># 而 push 的目的就是把小的白纸放到大白纸的对应位置</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#408080;font-style:italic"># 接下来的绘图动作就是在小的白纸上进行的</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#00f">pushViewport</span>(sample_vp)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">roundrectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#00f">grid.draw</span>(lollipop)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#408080;font-style:italic"># 弹出最上层的视图</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#00f">popViewport</span>()
</code></pre></div><p><img src="https://gitee.com/ShixiangWang/ImageCollection/raw/master/png/20210809123352.png" alt=""></p>
<blockquote>
<p>棒棒图的绘制见<a href="https://www.wolai.com/5sw6RUS9fcMYmUUmZfFbd6">「R」grid 图形对象 grobs</a>一文末尾。</p>
</blockquote>
<h2 id="视图的just参数">视图的<code>just</code>参数</h2>
<p>值得注意的是这里的<code>just</code>参数：它定义了新的视图是如何在旧（大） 的视图上摆放的。这里的<code>c(&quot;left&quot;, &quot;bottom&quot;)</code>指定了小的视图的左侧和下侧与其坐标单位<code>0.5, 0.5</code>对齐。我们看看修改下该参数的效果：</p>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">rectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>sample_vp <span style="color:#666">&lt;-</span> <span style="color:#00f">viewport</span>(x <span style="color:#666">=</span> <span style="color:#666">0.5</span>, y <span style="color:#666">=</span> <span style="color:#666">0.5</span>, 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>                      width <span style="color:#666">=</span> <span style="color:#666">0.5</span>, height <span style="color:#666">=</span> <span style="color:#666">0.5</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>                      just <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;center&#34;</span>, <span style="color:#ba2121">&#34;center&#34;</span>))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span style="color:#00f">pushViewport</span>(sample_vp)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">roundrectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span style="color:#00f">grid.draw</span>(lollipop)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span style="color:#00f">popViewport</span>() 
</code></pre></div><p><img src="https://gitee.com/ShixiangWang/ImageCollection/raw/master/png/20210809123359.png" alt=""></p>
<h2 id="操作视图">操作视图</h2>
<p><strong>我们一次只能操作一个视图，当确定视图后，我们就可以在上面绘制图形对象。如果我们需要在不同的视图中绘制，在绘制之前我们需要导航视图到我们需要进行绘制的视图上去。</strong></p>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">rectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>sample_vp_1 <span style="color:#666">&lt;-</span> <span style="color:#00f">viewport</span>(x <span style="color:#666">=</span> <span style="color:#666">0.75</span>, y <span style="color:#666">=</span> <span style="color:#666">0.75</span>, 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>                      width <span style="color:#666">=</span> <span style="color:#666">0.25</span>, height <span style="color:#666">=</span> <span style="color:#666">0.25</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>                      just <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;left&#34;</span>, <span style="color:#ba2121">&#34;bottom&#34;</span>))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#00f">pushViewport</span>(sample_vp_1)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">roundrectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#00f">grid.draw</span>(lollipop)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#00f">popViewport</span>() <span style="color:#408080;font-style:italic"># 这里必须弹出，试一试不弹出的结果是什么？</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>sample_vp_2 <span style="color:#666">&lt;-</span> <span style="color:#00f">viewport</span>(x <span style="color:#666">=</span> <span style="color:#666">0</span>, y <span style="color:#666">=</span> <span style="color:#666">0</span>, 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>                      width <span style="color:#666">=</span> <span style="color:#666">0.5</span>, height <span style="color:#666">=</span> <span style="color:#666">0.5</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>                      just <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;left&#34;</span>, <span style="color:#ba2121">&#34;bottom&#34;</span>))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#00f">pushViewport</span>(sample_vp_2)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">roundrectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#00f">grid.draw</span>(lollipop)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#00f">popViewport</span>()
</code></pre></div><p><img src="https://gitee.com/ShixiangWang/ImageCollection/raw/master/png/20210809123407.png" alt=""></p>
<h2 id="视图嵌套">视图嵌套</h2>
<p>视图可以层层嵌套堆叠到一起，在实际绘图中，绘制子图、放大部分图形通常可以通过该方式实现。</p>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">rectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>sample_vp_1 <span style="color:#666">&lt;-</span> <span style="color:#00f">viewport</span>(x <span style="color:#666">=</span> <span style="color:#666">0.5</span>, y <span style="color:#666">=</span> <span style="color:#666">0.5</span>, 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>                      width <span style="color:#666">=</span> <span style="color:#666">0.5</span>, height <span style="color:#666">=</span> <span style="color:#666">0.5</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>                      just <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;left&#34;</span>, <span style="color:#ba2121">&#34;bottom&#34;</span>))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>sample_vp_2 <span style="color:#666">&lt;-</span> <span style="color:#00f">viewport</span>(x <span style="color:#666">=</span> <span style="color:#666">0.1</span>, y <span style="color:#666">=</span> <span style="color:#666">0.1</span>, 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>                      width <span style="color:#666">=</span> <span style="color:#666">0.4</span>, height <span style="color:#666">=</span> <span style="color:#666">0.4</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>                      just <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;left&#34;</span>, <span style="color:#ba2121">&#34;bottom&#34;</span>))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#408080;font-style:italic"># 先导航到第一个视图</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#00f">pushViewport</span>(sample_vp_1)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#408080;font-style:italic"># 绘制</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">roundrectGrob</span>(gp <span style="color:#666">=</span> <span style="color:#00f">gpar</span>(col <span style="color:#666">=</span> <span style="color:#ba2121">&#34;red&#34;</span>)))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#408080;font-style:italic"># 再导航到第二个视图</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#00f">pushViewport</span>(sample_vp_2)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#408080;font-style:italic"># 绘制</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">roundrectGrob</span>())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#00f">grid.draw</span>(lollipop)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#408080;font-style:italic"># 弹出添加的2个视图</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#00f">popViewport</span>(<span style="color:#666">2</span>)
</code></pre></div><p><img src="https://gitee.com/ShixiangWang/ImageCollection/raw/master/png/20210809123412.png" alt=""></p>
<p>注意，上面我们使用了<code>popViewport(2)</code>重新导航到主（初始的）绘图视图。</p>
<p><code>grid.ls()</code>可以罗列出所有的绘图对象：</p>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#666">&gt;</span> <span style="color:#00f">grid.ls</span>()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>GRID.rect.7246
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>GRID.roundrect.7247
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>GRID.gTree.7233
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>  GRID.circle.7231
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>  GRID.segments.7232
</code></pre></div><h2 id="捕获ggplot的grobs对象">捕获ggplot的grobs对象</h2>
<p>对于ggplot对象，我们也可以捕获全部的grobs对象。操作示例如下：</p>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>worldcup <span style="color:#666">%&gt;%</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#00f">ggplot</span>(<span style="color:#00f">aes</span>(x <span style="color:#666">=</span> Time, y <span style="color:#666">=</span> Passes)) <span style="color:#666">+</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#00f">geom_point</span>()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span style="color:#00f">grid.force</span>() <span style="color:#408080;font-style:italic"># 必需的</span>
</code></pre></div><p><img src="https://gitee.com/ShixiangWang/ImageCollection/raw/master/png/20210809123420.png" alt=""></p>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#666">&gt;</span> <span style="color:#00f">grid.ls</span>()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>layout
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  background.1<span style="color:#666">-9-12-1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  panel.7<span style="color:#666">-5-7-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>    grill.gTree.7261
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>      panel.background..zeroGrob.7252
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>      panel.grid.minor.y..polyline.7254
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>      panel.grid.minor.x..polyline.7256
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>      panel.grid.major.y..polyline.7258
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>      panel.grid.major.x..polyline.7260
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>    <span style="color:#008000;font-weight:bold">NULL</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>    geom_point.points.7249
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>    <span style="color:#008000;font-weight:bold">NULL</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>    panel.border..zeroGrob.7250
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>  spacer.8<span style="color:#666">-6-8-6</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>  spacer.8<span style="color:#666">-4-8-4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>  spacer.6<span style="color:#666">-6-6-6</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>  spacer.6<span style="color:#666">-4-6-4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>  axis<span style="color:#666">-</span>t.6<span style="color:#666">-5-6-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>  axis<span style="color:#666">-</span>l.7<span style="color:#666">-4-7-4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>    <span style="color:#008000;font-weight:bold">NULL</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>    axis
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>      axis.1<span style="color:#666">-1-1-1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>        GRID.text.7267
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>      axis.1<span style="color:#666">-2-1-2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>  axis<span style="color:#666">-</span>r.7<span style="color:#666">-6-7-6</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>  axis<span style="color:#666">-</span>b.8<span style="color:#666">-5-8-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>    <span style="color:#008000;font-weight:bold">NULL</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>    axis
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>      axis.1<span style="color:#666">-1-1-1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>      axis.2<span style="color:#666">-1-2-1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>        GRID.text.7264
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>  xlab<span style="color:#666">-</span>t.5<span style="color:#666">-5-5-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>  xlab<span style="color:#666">-</span>b.9<span style="color:#666">-5-9-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>    GRID.text.7270
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>  ylab<span style="color:#666">-</span>l.7<span style="color:#666">-3-7-3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>    GRID.text.7273
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>  ylab<span style="color:#666">-</span>r.7<span style="color:#666">-7-7-7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>  subtitle.4<span style="color:#666">-5-4-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>  title.3<span style="color:#666">-5-3-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>  caption.10<span style="color:#666">-5-10-5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>  tag.2<span style="color:#666">-2-2-2</span>
</code></pre></div><p>我们可以将ggplot绘制到grid视图中去，下面是一个例子：</p>
<blockquote>
<p>代码不重要，理解其思想和大致操作逻辑。</p>
</blockquote>
<div class="highlight"><pre style=";-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-R" data-lang="R"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>balt_counties <span style="color:#666">&lt;-</span> <span style="color:#00f">map_data</span>(<span style="color:#ba2121">&#34;county&#34;</span>, region <span style="color:#666">=</span> <span style="color:#ba2121">&#34;maryland&#34;</span>) <span style="color:#666">%&gt;%</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>  <span style="color:#00f">mutate</span>(our_counties <span style="color:#666">=</span> subregion <span style="color:#666">%in%</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;baltimore&#34;</span>, <span style="color:#ba2121">&#34;baltimore city&#34;</span>))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>balt_map <span style="color:#666">&lt;-</span> <span style="color:#00f">get_map</span>(<span style="color:#ba2121">&#34;Baltimore County&#34;</span>, zoom <span style="color:#666">=</span> <span style="color:#666">10</span>) <span style="color:#666">%&gt;%</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#00f">ggmap</span>(extent <span style="color:#666">=</span> <span style="color:#ba2121">&#34;device&#34;</span>) <span style="color:#666">+</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#00f">geom_polygon</span>(data <span style="color:#666">=</span> <span style="color:#00f">filter</span>(balt_counties, our_counties <span style="color:#666">==</span> <span style="color:#008000;font-weight:bold">TRUE</span>),
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>               <span style="color:#00f">aes</span>(x <span style="color:#666">=</span> long, y <span style="color:#666">=</span> lat, group <span style="color:#666">=</span> group),
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>               fill <span style="color:#666">=</span> <span style="color:#ba2121">&#34;red&#34;</span>, color <span style="color:#666">=</span> <span style="color:#ba2121">&#34;darkred&#34;</span>, alpha <span style="color:#666">=</span> <span style="color:#666">0.2</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>maryland_map <span style="color:#666">&lt;-</span> balt_counties <span style="color:#666">%&gt;%</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#00f">ggplot</span>(<span style="color:#00f">aes</span>(x <span style="color:#666">=</span> long, y <span style="color:#666">=</span> lat, group <span style="color:#666">=</span> group, fill <span style="color:#666">=</span> our_counties)) <span style="color:#666">+</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>  <span style="color:#00f">geom_polygon</span>(color <span style="color:#666">=</span> <span style="color:#ba2121">&#34;black&#34;</span>) <span style="color:#666">+</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>  <span style="color:#00f">scale_fill_manual</span>(values <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;white&#34;</span>, <span style="color:#ba2121">&#34;darkred&#34;</span>), guide <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">FALSE</span>) <span style="color:#666">+</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>  <span style="color:#00f">theme_void</span>() <span style="color:#666">+</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>  <span style="color:#00f">coord_map</span>()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">ggplotGrob</span>(balt_map))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>md_inset <span style="color:#666">&lt;-</span> <span style="color:#00f">viewport</span>(x <span style="color:#666">=</span> <span style="color:#666">0</span>, y <span style="color:#666">=</span> <span style="color:#666">0</span>, 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>                     just <span style="color:#666">=</span> <span style="color:#00f">c</span>(<span style="color:#ba2121">&#34;left&#34;</span>, <span style="color:#ba2121">&#34;bottom&#34;</span>),
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>                     width <span style="color:#666">=</span> <span style="color:#666">0.35</span>, height <span style="color:#666">=</span> <span style="color:#666">0.35</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#00f">pushViewport</span>(md_inset)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">rectGrob</span>(gp <span style="color:#666">=</span> <span style="color:#00f">gpar</span>(alpha <span style="color:#666">=</span> <span style="color:#666">0.5</span>, col <span style="color:#666">=</span> <span style="color:#ba2121">&#34;white&#34;</span>)))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">rectGrob</span>(gp <span style="color:#666">=</span> <span style="color:#00f">gpar</span>(fill <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">NA</span>, col <span style="color:#666">=</span> <span style="color:#ba2121">&#34;black&#34;</span>)))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span style="color:#00f">grid.draw</span>(<span style="color:#00f">ggplotGrob</span>(maryland_map))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span style="color:#00f">popViewport</span>()
</code></pre></div><p><img src="https://gitee.com/ShixiangWang/ImageCollection/raw/master/png/20210809123428.png" alt=""></p>

				</div>
				<footer class="footer">
				  <hr>
<div class="post-tags">

<p>
  <svg xmlns="http://www.w3.org/2000/svg" class="octicon" width="20" height="24" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M8 2H6V0h2v2zm4 5H2c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h10l2 2-2 2zM8 4H6v2h2V4zM6 16h2V8H6v8z"/></svg>
	
	<a class="p-category" href="../../categories/blog/">Blog</a>
</p>


<p>
  <svg xmlns="http://www.w3.org/2000/svg" class="octicon" width="20" height="24" viewBox="0 0 15 16"><path fill-rule="evenodd" d="M7.73 1.73C7.26 1.26 6.62 1 5.96 1H3.5C2.13 1 1 2.13 1 3.5v2.47c0 .66.27 1.3.73 1.77l6.06 6.06c.39.39 1.02.39 1.41 0l4.59-4.59a.996.996 0 0 0 0-1.41L7.73 1.73zM2.38 7.09c-.31-.3-.47-.7-.47-1.13V3.5c0-.88.72-1.59 1.59-1.59h2.47c.42 0 .83.16 1.13.47l6.14 6.13-4.73 4.73-6.13-6.15zM3.01 3h2v2H3V3h.01z"/></svg>
	
	<a class="p-tag" href="../../tags/%E5%8F%AF%E8%A7%86%E5%8C%96/">可视化</a><a class="p-tag" href="../../tags/%E5%AD%A6%E4%B9%A0/">学习</a><a class="p-tag" href="../../tags/grid/">grid</a>

</p>
</div>

				</footer>
			</article>
		</main>
			  <button class="hamburger hamburger--arrow is-active" type="button" onclick="document.getElementsByClassName('sidebar')[0].classList.toggle('collapsed');document.getElementsByClassName('content')[0].classList.toggle('expanded');document.getElementsByClassName('hamburger')[0].classList.toggle('is-active');document.getElementsByClassName('hamburger-inner')[0].classList.toggle('is-active')">
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
    </button>
		<aside class="sidebar">
			<div class="container sidebar-sticky">
				<header class="sidebar-about h-card vcard p-author">
					
					<a class="u-url u-uid" rel="me" href="../../">
						<img class="u-photo" src="https://avatars.githubusercontent.com/u/25057508?v=4" width=128 height=128 />
					</a>
					

					
					<span class="site-title u-name fn">
					  <a class="u-url u-uid" rel="me" href="../../">ShixiangWang
王诗翔</a>
				  </span>
					

					<p class="lead p-note">
						 Bioinformatics Scholar. Cancer Researcher. Data Scientist. #rstats #golang. Always learning something new. 
					</p>

					<nav>
						<ul class="sidebar-nav">
							
							<li><a href="../../about/"> About </a></li>
							
							<li><a href="../../blog/"> Blog </a></li>
							
							<li><a href="../../project/"> Projects </a></li>
							
							<li><a href="http://42.192.87.178:3838/"> Shiny Apps </a></li>
							
							<li><a href="../../talk/"> Talks </a></li>
							
							<li><a href="https://github.com/ShixiangWang/self-study/discussions"> Discuss with me? </a></li>
							
							<li><a href="https://shixiangwang.netlify.app/"> Mirror #1 </a></li>
							
							<li><a href="https://shixiangwang.github.io/"> Mirror #2 </a></li>
							
						</ul>
					</nav>

					
						<div class="contact">
						  
							<ul class="contact-list">
								
								<li>
									
									  
		  							  <a href="https://twitter.com/WangShxiang" class="u-url url" rel="me" title="Twitter" aria-label="Twitter">
		  						    <i class='fab fa-twitter fa-fw'></i>
		  							  </a>
		  						  
								
								</li>
								
								<li>
									
									  
		  							  <a href="https://github.com/ShixiangWang" class="u-url url" rel="me" title="GitHub" aria-label="GitHub">
		  						    <i class='fab fa-github fa-fw'></i>
		  							  </a>
		  						  
								
								</li>
								
								<li>
									
		  							<a href="mailto:shixiang1994wang@gmail.com" class="u-email email" rel="me" title="Email" aria-label="Email">
		  							<i class='fa fa-envelope fa-fw'></i>
		  							  
		  							</a>
									
								</li>
								
								<li>
									
									  
		  							  <a href="https://shixiangwang.github.io/home/logo/qrcode.jpg" class="u-url url" rel="me" title="Bandcamp" aria-label="Bandcamp">
		  						    <i class='fab fa-bandcamp fa-fw'></i>
		  							  </a>
		  						  
								
								</li>
								
							</ul>
						</div>
					
				</header>

				<footer>&copy; 2021. All rights reserved. </footer>
				 <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">本站总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;次</span>
			</div>
		</aside>

		  <footer>
  <script src="../../js/jquery-latest.js"></script>
<script src="../../js/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

  

  
  </footer>
  </body>
</html>

	</body>
</html>
