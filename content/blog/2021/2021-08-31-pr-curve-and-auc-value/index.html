---
title: PR曲线与AUC
author: 王诗翔
date: '2021-08-31'
slug: pr-curve-and-auc-value
categories:
  - Blog
tags:
  - R
  - 机器学习
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<p>这里直接使用ROCR包提供的数据作为示例：</p>
<pre class="r"><code>library(ROCR)
data(ROCR.simple)
pred &lt;- prediction(ROCR.simple$predictions, ROCR.simple$labels)
perf &lt;- performance(pred,&quot;tpr&quot;,&quot;fpr&quot;)
plot(perf)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>## precision/recall curve (x-axis: recall, y-axis: precision)
perf1 &lt;- performance(pred, &quot;prec&quot;, &quot;rec&quot;)
plot(perf1, xlim = c(0, 1), ylim = c(0, 1))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<p>使用 <code>PRROC</code> 包获取PR AUC值并且绘图：</p>
<pre class="r"><code>pr &lt;- PRROC::pr.curve(ROCR.simple$predictions, weights.class0 = ROCR.simple$labels, curve = TRUE)
pr</code></pre>
<pre><code>## 
##   Precision-recall curve
## 
##     Area under curve (Integral):
##      0.7815038 
## 
##     Area under curve (Davis &amp; Goadrich):
##      0.7814246 
## 
##     Curve for scores from  0.005422562  to  0.9910964 
##     ( can be plotted with plot(x) )</code></pre>
<pre class="r"><code>plot(pr)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>不要把标签顺序搞错了。</p>
<pre class="r"><code>pr &lt;- PRROC::pr.curve(ROCR.simple$labels, weights.class0 = ROCR.simple$predictions, curve = TRUE)
plot(pr)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
