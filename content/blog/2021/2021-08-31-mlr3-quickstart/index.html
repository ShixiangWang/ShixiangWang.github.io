---
title: mlr3（一）快速入门
author: 王诗翔
date: '2021-08-31'
slug: mlr3-quickstart
categories:
  - Blog
tags:
  - R
  - mlr3
  - 机器学习
description: 翻译与笔记
keywords: rstats
editor_options:
  chunk_output_type: console
---

<script src="{{< blogdown/postref >}}index_files/header-attrs-2.10/header-attrs.js"></script>


<!-- Links -->
<p>来源：<a href="https://mlr3book.mlr-org.com/quickstart.html" class="uri">https://mlr3book.mlr-org.com/quickstart.html</a></p>
<p>安装包：</p>
<pre class="r"><code>install.packages(&quot;mlr3&quot;)</code></pre>
<p>作为一个30秒的介绍性示例，我们将在虹膜数据集的前120行训练决策树模型，并对最后30行进行预测，测量训练模型的准确性。</p>
<pre class="r"><code>library(&quot;mlr3&quot;)
task = tsk(&quot;iris&quot;)
learner = lrn(&quot;classif.rpart&quot;)

# 为任务的一个子集（前120行）训练这个学习者的模型
learner$train(task, row_ids = 1:120)
# 决策树模型
learner$model</code></pre>
<pre><code>out n= 120 
out 
out node), split, n, loss, yval, (yprob)
out       * denotes terminal node
out 
out 1) root 120 70 setosa (0.41666667 0.41666667 0.16666667)  
out   2) Petal.Length&lt; 2.45 50  0 setosa (1.00000000 0.00000000 0.00000000) *
out   3) Petal.Length&gt;=2.45 70 20 versicolor (0.00000000 0.71428571 0.28571429)  
out     6) Petal.Length&lt; 4.95 49  1 versicolor (0.00000000 0.97959184 0.02040816) *
out     7) Petal.Length&gt;=4.95 21  2 virginica (0.00000000 0.09523810 0.90476190) *</code></pre>
<p>进行预测：</p>
<pre class="r"><code>predictions = learner$predict(task, row_ids = 121:150)
predictions</code></pre>
<pre><code>out &lt;PredictionClassif&gt; for 30 observations:
out     row_ids     truth   response
out         121 virginica  virginica
out         122 virginica versicolor
out         123 virginica  virginica
out ---                             
out         148 virginica  virginica
out         149 virginica  virginica
out         150 virginica  virginica</code></pre>
<p>查看我们的模型在测试数据集上的精度：</p>
<pre class="r"><code># accuracy of our model on the test set of the final 30 rows
predictions$score(msr(&quot;classif.acc&quot;))</code></pre>
<pre><code>out classif.acc 
out   0.8333333</code></pre>
<p>更多的示例可以在<a href="https://mlr3gallery.mlr-org.com/">mlr3gallery</a>中找到，该gallery是用例和示例的集合。在学习mlr3时，我们强烈建议你打印一些<a href="https://cheatsheets.mlr-org.com/">备忘单</a>。</p>
